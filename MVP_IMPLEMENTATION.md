# V3.0 MVP å®æ–½è®¡åˆ’ - å¼€æºèµ„æºæ•´åˆä¼˜å…ˆ

## é¡¹ç›®ä½¿å‘½

**SAT-DISCOVERY** - å…¨çƒå¼€æºå«æ˜Ÿæ•°æ®èµ„æºæ•´åˆå…¬ç›Šå¹³å°

æ•´åˆå…¨çƒé›¶ç¢çš„å¼€æºèµ„æºï¼Œæä¾›ç»Ÿä¸€è®¿é—®æ¥å£ï¼ŒæœåŠ¡å…¨çƒç”¨æˆ·ã€‚

---

## ğŸ¯ MVP ç›®æ ‡ (6å‘¨)

### æ ¸å¿ƒç›®æ ‡

1. **æ¥å…¥ 5+ å¼€æºæ•°æ®æº**
2. **é›†æˆ 5+ å¼€æºç®—æ³•**
3. **æä¾›ç»Ÿä¸€ API**
4. **100% å¼€æºå…è´¹**

---

## ğŸ“… 6å‘¨å®æ–½è®¡åˆ’

### Week 1-2: åŸºç¡€æ¶æ„ + ç¬¬ä¸€æ‰¹æ•°æ®æº

#### åç«¯åŸºç¡€è®¾æ–½

**Day 1-2: é¡¹ç›®åˆå§‹åŒ–**
- [ ] åˆ›å»º Node.js åç«¯é¡¹ç›®
- [ ] è®¾ç½® Express/Fastify
- [ ] é…ç½® TypeScript
- [ ] Docker å¼€å‘ç¯å¢ƒ

**Day 3-5: æ•°æ®åº“è®¾ç½®**
- [ ] PostgreSQL + PostGIS
- [ ] Redis (ç¼“å­˜)
- [ ] æ•°æ®åº“è¿ç§»å·¥å…·
- [ ] åŸºç¡€ Schema

**Day 6-7: API Gateway**
- [ ] è·¯ç”±è®¾ç½®
- [ ] åŸºç¡€è®¤è¯ (å¯é€‰)
- [ ] CORS é…ç½®
- [ ] å¥åº·æ£€æŸ¥

**Day 8-10: è¿æ¥å™¨æ¡†æ¶**
- [ ] DataConnector æ¥å£
- [ ] è¿æ¥å™¨æ³¨å†Œå™¨
- [ ] æ ‡å‡†åŒ–å¼•æ“
- [ ] å…ƒæ•°æ®ç´¢å¼•

#### ç¬¬ä¸€æ‰¹æ•°æ®æº (STAC)

**Day 11-14: STAC è¿æ¥å™¨**
- [ ] STAC Client åŸºç¡€
- [ ] AWS Earth Search
- [ ] Microsoft Planetary Computer
- [ ] Radiant MLHub

**æµ‹è¯•**:
- [ ] æœç´¢åŠŸèƒ½æµ‹è¯•
- [ ] å…ƒæ•°æ®æ ‡å‡†åŒ–æµ‹è¯•
- [ ] æ€§èƒ½æµ‹è¯•

---

### Week 3: è½¨é“é¢„æµ‹ + ç¬¬äºŒæ‰¹æ•°æ®æº

#### è½¨é“åŸŸ

**Day 15-17: TLE ç®¡ç†**
- [ ] TLE æ•°æ®åº“æ¨¡å‹
- [ ] Celestrak é›†æˆ
- [ ] TLE æ›´æ–°æœåŠ¡
- [ ] å†å²TLEå­˜å‚¨

**Day 18-19: è½¨é“è®¡ç®—**
- [ ] satellite.js é›†æˆ
- [ ] è¿‡å¢ƒé¢„æµ‹ API
- [ ] AOI è¦†ç›–è®¡ç®—

**Day 20-21: å¯è§†åŒ–**
- [ ] è½¨é“è½¨è¿¹è®¡ç®—
- [ ] GeoJSON è¾“å‡º
- [ ] å‰ç«¯åœ°å›¾é›†æˆ

#### ç¬¬äºŒæ‰¹æ•°æ®æº (API)

- [ ] NASA CMR è¿æ¥å™¨
- [ ] ESA Copernicus (åŸºç¡€)

---

### Week 4: å¤„ç†ç®—æ³• + ä»»åŠ¡é˜Ÿåˆ—

#### å¤„ç†åŸŸ

**Day 22-24: ç®—æ³•æ¡†æ¶**
- [ ] Algorithm æ¥å£
- [ ] ç®—æ³•æ³¨å†Œå™¨
- [ ] è¾“å…¥éªŒè¯
- [ ] è¾“å‡ºæ ‡å‡†åŒ–

**Day 25-28: æ ¸å¿ƒç®—æ³•**
- [ ] NDVI ç®—æ³•
  - Rasterio è¯»å–
  - NumPy è®¡ç®—
  - COG è¾“å‡º
- [ ] NDWI ç®—æ³•
- [ ] Cloud Mask (ç®€å•)
- [ ] DEM Slope (GDAL)

#### ä»»åŠ¡é˜Ÿåˆ—

- [ ] Bull Queue è®¾ç½®
- [ ] Worker è¿›ç¨‹
- [ ] ä»»åŠ¡çŠ¶æ€è¿½è¸ª
- [ ] åŸºç¡€æ—¥å¿—

---

### Week 5: æ›´å¤šç®—æ³• + UIé›†æˆ

#### ç®—æ³•æ‰©å±•

**Day 29-31: SAR å¤„ç†**
- [ ] Orfeo ToolBox Python ç»‘å®š
- [ ] Speckle Filter
- [ ] Backscatter åˆ†æ

**Day 32-33: æ—¶é—´åºåˆ—**
- [ ] æ—¶é—´åºåˆ—æŸ¥è¯¢
- [ ] NDVI è¶‹åŠ¿åˆ†æ
- [ ] ç®€å•å¯è§†åŒ–

**Day 34-35: åœ°å½¢åˆ†æ**
- [ ] GDAL DEM å·¥å…·
- [ ] Slope/Aspect
- [ ] Hillshade

#### UI é›†æˆ

- [ ] V2.0 Workbench è¿æ¥åç«¯
- [ ] æ•°æ®æºé€‰æ‹©å™¨
- [ ] ç®—æ³•æ‰§è¡Œç•Œé¢
- [ ] ç»“æœå±•ç¤º

---

### Week 6: æ–‡æ¡£ + æµ‹è¯• + éƒ¨ç½²

#### æ–‡æ¡£

**Day 36-37: API æ–‡æ¡£**
- [ ] OpenAPI/Swagger
- [ ] ç«¯ç‚¹è¯´æ˜
- [ ] ç¤ºä¾‹ä»£ç 
- [ ] æ•™ç¨‹

**Day 38: ç”¨æˆ·æŒ‡å—**
- [ ] å¿«é€Ÿå¼€å§‹
- [ ] æ•°æ®æºä½¿ç”¨
- [ ] ç®—æ³•ä½¿ç”¨
- [ ] FAQ

#### æµ‹è¯•

**Day 39-40: é›†æˆæµ‹è¯•**
- [ ] ç«¯åˆ°ç«¯æµ‹è¯•
- [ ] æ€§èƒ½æµ‹è¯•
- [ ] è´Ÿè½½æµ‹è¯•
- [ ] è¾¹ç•Œæµ‹è¯•

#### éƒ¨ç½²

**Day 41-42: ç”Ÿäº§éƒ¨ç½²**
- [ ] Docker å®¹å™¨åŒ–
- [ ] Docker Compose
- [ ] ç¯å¢ƒé…ç½®
- [ ] ç›‘æ§è®¾ç½®
- [ ] å¤‡ä»½ç­–ç•¥

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æœåŠ¡

```
backend/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ gateway/           # API Gateway (Port 3000)
â”‚   â”œâ”€â”€ data-ingestion/    # æ•°æ®æ¥å…¥ (Port 3001)
â”‚   â”œâ”€â”€ orbital/           # è½¨é“è®¡ç®— (Port 3002)
â”‚   â””â”€â”€ processing/        # ç®—æ³•å¤„ç† (Port 3003)
â”‚
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ database/          # æ•°æ®åº“å·¥å…·
â”‚   â”œâ”€â”€ redis/             # Redis å·¥å…·
â”‚   â””â”€â”€ utils/             # é€šç”¨å·¥å…·
â”‚
â”œâ”€â”€ connectors/            # æ•°æ®æºè¿æ¥å™¨
â”‚   â”œâ”€â”€ stac/              # STAC è¿æ¥å™¨
â”‚   â”œâ”€â”€ nasa-cmr/          # NASA CMR
â”‚   â””â”€â”€ copernicus/        # Copernicus
â”‚
â”œâ”€â”€ algorithms/            # å¤„ç†ç®—æ³•
â”‚   â”œâ”€â”€ spectral/          # å…‰è°±æŒ‡æ•°
â”‚   â”œâ”€â”€ sar/               # SAR å¤„ç†
â”‚   â””â”€â”€ terrain/           # åœ°å½¢åˆ†æ
â”‚
â””â”€â”€ docker-compose.yml     # å¼€å‘ç¯å¢ƒ
```

### æŠ€æœ¯æ ˆ

**æ ¸å¿ƒ**:
- Node.js 18+ / TypeScript
- Python 3.11+ (ç®—æ³•)
- PostgreSQL 14 + PostGIS
- Redis 7

**å¤„ç†**:
- GDAL 3.6+
- Rasterio
- NumPy/SciPy
- Orfeo ToolBox

**å®¹å™¨**:
- Docker
- Docker Compose

---

## ğŸ“Š æ•°æ®æµ

```
ç”¨æˆ·è¯·æ±‚
    â†“
API Gateway (è®¤è¯/è·¯ç”±)
    â†“
æ•°æ®æ¥å…¥æœåŠ¡
    â”œâ†’ STAC è¿æ¥å™¨ â†’ AWS/PC/MLHub
    â”œâ†’ CMR è¿æ¥å™¨ â†’ NASA
    â””â†’ Copernicus è¿æ¥å™¨ â†’ ESA
    â†“
å…ƒæ•°æ®æ ‡å‡†åŒ–
    â†“
å­˜å‚¨åˆ° PostgreSQL/PostGIS
    â†“
ç®—æ³•å¤„ç†æœåŠ¡
    â”œâ†’ NDVI ç®—æ³•
    â”œâ†’ SAR ç®—æ³•
    â””â†’ DEM ç®—æ³•
    â†“
ä»»åŠ¡é˜Ÿåˆ— (Bull/Redis)
    â†“
Worker æ‰§è¡Œ
    â†“
ç»“æœå­˜å‚¨
    â†“
è¿”å›ç”¨æˆ·
```

---

## ğŸ”Œ è¿æ¥å™¨å®ç°

### STAC è¿æ¥å™¨ç¤ºä¾‹

```typescript
// connectors/stac/stac-connector.ts
import { DataConnector, SearchQuery, Item } from '../base';

export class STACConnector implements DataConnector {
  private baseUrl: string;
  
  constructor(config: { url: string }) {
    this.baseUrl = config.url;
  }
  
  async search(query: SearchQuery): Promise<Item[]> {
    const stacQuery = {
      bbox: query.bbox,
      datetime: `${query.startDate}/${query.endDate}`,
      collections: query.collections,
      limit: query.limit || 100
    };
    
    const response = await fetch(`${this.baseUrl}/search`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(stacQuery)
    });
    
    const data = await response.json();
    
    // æ ‡å‡†åŒ–ä¸ºå†…éƒ¨æ ¼å¼
    return data.features.map(this.normalizeItem);
  }
  
  private normalizeItem(stacItem: any): Item {
    return {
      id: stacItem.id,
      collection: stacItem.collection,
      geometry: stacItem.geometry,
      datetime: stacItem.properties.datetime,
      cloudCover: stacItem.properties['eo:cloud_cover'],
      resolution: stacItem.properties.gsd,
      assets: stacItem.assets,
      source: {
        connector: 'stac',
        originalId: stacItem.id
      }
    };
  }
}
```

### NASA CMR è¿æ¥å™¨

```typescript
// connectors/nasa-cmr/cmr-connector.ts
export class NASACMRConnector implements DataConnector {
  private baseUrl = 'https://cmr.earthdata.nasa.gov/search';
  
  async search(query: SearchQuery): Promise<Item[]> {
    const cmrQuery = {
      bounding_box: query.bbox.join(','),
      temporal: `${query.startDate},${query.endDate}`,
      page_size: query.limit || 100
    };
    
    const params = new URLSearchParams(cmrQuery);
    const response = await fetch(
      `${this.baseUrl}/granules.json?${params}`
    );
    
    const data = await response.json();
    
    return data.feed.entry.map(this.normalizeItem);
  }
  
  private normalizeItem(cmrItem: any): Item {
    // è½¬æ¢ CMR æ ¼å¼åˆ°æ ‡å‡†æ ¼å¼
    // ...
  }
}
```

---

## ğŸ§® ç®—æ³•å®ç°

### NDVI ç®—æ³•

```python
# algorithms/spectral/ndvi.py
import numpy as np
import rasterio
from rasterio.plot import reshape_as_image

def calculate_ndvi(red_band_path: str, nir_band_path: str, output_path: str):
    """
    è®¡ç®— NDVI (Normalized Difference Vegetation Index)
    NDVI = (NIR - RED) / (NIR + RED)
    """
    # è¯»å–çº¢å…‰æ³¢æ®µ
    with rasterio.open(red_band_path) as red_src:
        red = red_src.read(1).astype(float)
        profile = red_src.profile
    
    # è¯»å–è¿‘çº¢å¤–æ³¢æ®µ
    with rasterio.open(nir_band_path) as nir_src:
        nir = nir_src.read(1).astype(float)
    
    # è®¡ç®— NDVI
    # é¿å…é™¤ä»¥é›¶
    ndvi = np.where(
        (nir + red) == 0,
        0,
        (nir - red) / (nir + red)
    )
    
    # å†™å…¥ç»“æœ
    profile.update(dtype=rasterio.float32, count=1)
    with rasterio.open(output_path, 'w', **profile) as dst:
        dst.write(ndvi.astype(rasterio.float32), 1)
    
    return output_path
```

### DEM Slope

```python
# algorithms/terrain/slope.py
from osgeo import gdal
import numpy as np

def calculate_slope(dem_path: str, output_path: str, units='degrees'):
    """
    ä½¿ç”¨ GDAL è®¡ç®—å¡åº¦
    """
    # æ‰“å¼€ DEM
    dem = gdal.Open(dem_path)
    
    # è®¡ç®—å¡åº¦
    gdal.DEMProcessing(
        output_path,
        dem,
        'slope',
        format='GTiff',
        computeEdges=True,
        slopeFormat=units
    )
    
    return output_path
```

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

```typescript
// tests/connectors/stac.test.ts
describe('STAC Connector', () => {
  it('should search and return standardized items', async () => {
    const connector = new STACConnector({
      url: 'https://earth-search.aws.element84.com/v1'
    });
    
    const results = await connector.search({
      bbox: [-180, -90, 180, 90],
      startDate: '2024-01-01',
      endDate: '2024-01-31',
      collections: ['sentinel-2-l2a'],
      limit: 10
    });
    
    expect(results).toHaveLength(10);
    expect(results[0]).toHaveProperty('id');
    expect(results[0]).toHaveProperty('geometry');
    expect(results[0].source.connector).toBe('stac');
  });
});
```

---

## ğŸ“¦ éƒ¨ç½²é…ç½®

### Docker Compose

```yaml
# docker-compose.yml
version: '3.8'

services:
  # PostgreSQL + PostGIS
  postgres:
    image: postgis/postgis:14-3.3
    environment:
      POSTGRES_DB: sat_discovery
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
  
  # Redis
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
  
  # API Gateway
  gateway:
    build: ./services/gateway
    ports:
      - "3000:3000"
    environment:
      DATABASE_URL: postgresql://admin:${DB_PASSWORD}@postgres:5432/sat_discovery
      REDIS_URL: redis://redis:6379
    depends_on:
      - postgres
      - redis
  
  # Data Ingestion Service
  data-ingestion:
    build: ./services/data-ingestion
    ports:
      - "3001:3001"
    environment:
      DATABASE_URL: postgresql://admin:${DB_PASSWORD}@postgres:5432/sat_discovery
    depends_on:
      - postgres
  
  # Orbital Service
  orbital:
    build: ./services/orbital
    ports:
      - "3002:3002"
    environment:
      DATABASE_URL: postgresql://admin:${DB_PASSWORD}@postgres:5432/sat_discovery
    depends_on:
      - postgres
  
  # Processing Service
  processing:
    build: ./services/processing
    ports:
      - "3003:3003"
    environment:
      REDIS_URL: redis://redis:6379
    depends_on:
      - redis

volumes:
  postgres_data:
  redis_data:
```

---

## ğŸ“ ç¯å¢ƒå˜é‡

```bash
# .env.example
# Database
DATABASE_URL=postgresql://admin:password@localhost:5432/sat_discovery

# Redis
REDIS_URL=redis://localhost:6379

# API Keys (å¯é€‰)
NASA_API_KEY=
ESA_USERNAME=
ESA_PASSWORD=

# æœåŠ¡ç«¯å£
GATEWAY_PORT=3000
DATA_INGESTION_PORT=3001
ORBITAL_PORT=3002
PROCESSING_PORT=3003

# å¼€å‘/ç”Ÿäº§
NODE_ENV=development
```

---

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

### MVP å®Œæˆæ ‡å‡†

âœ… **æ•°æ®æ¥å…¥**:
- 5+ å¼€æºæ•°æ®æºå¯ç”¨
- STAC æ ‡å‡†åŒ–å®Œæˆ
- æœç´¢åŠŸèƒ½æ­£å¸¸

âœ… **è½¨é“é¢„æµ‹**:
- TLE è‡ªåŠ¨æ›´æ–°
- è¿‡å¢ƒé¢„æµ‹å‡†ç¡®
- è¦†ç›–è®¡ç®—æ­£ç¡®

âœ… **ç®—æ³•å¤„ç†**:
- 5+ ç®—æ³•å¯æ‰§è¡Œ
- ç»“æœæ ¼å¼æ­£ç¡®
- æ€§èƒ½å¯æ¥å—

âœ… **ç³»ç»Ÿç¨³å®šæ€§**:
- API å“åº” < 2s
- æ— è‡´å‘½é”™è¯¯
- åŸºç¡€ç›‘æ§å°±ç»ª

âœ… **æ–‡æ¡£å®Œæ•´**:
- API æ–‡æ¡£
- ç”¨æˆ·æŒ‡å—
- éƒ¨ç½²æ–‡æ¡£

---

## ğŸš€ å‘å¸ƒè®¡åˆ’

### Week 6 æœ«

**Beta ç‰ˆæœ¬**:
- åŠŸèƒ½å®Œæ•´
- æ–‡æ¡£é½å…¨
- å¯å…¬å¼€æµ‹è¯•

**å‘å¸ƒæ¸ é“**:
- GitHub Release
- æŠ€æœ¯åšå®¢
- ç¤¾äº¤åª’ä½“
- é¥æ„Ÿç¤¾åŒº

**åé¦ˆæ”¶é›†**:
- GitHub Issues
- ç”¨æˆ·è°ƒæŸ¥
- ç¤¾åŒºè®¨è®º

---

## ğŸ“ˆ åç»­è§„åˆ’

### Month 2-3

**æ›´å¤šæ•°æ®æº**:
- Google Earth Engine
- OpenAerialMap
- OpenTopography
- æ‰€æœ‰è®¡åˆ’ä¸­çš„æº

**é«˜çº§ç®—æ³•**:
- SNAP å¤„ç†é“¾
- æœºå™¨å­¦ä¹ æ¨¡å‹
- å¤æ‚æ—¶é—´åºåˆ—
- å˜åŒ–æ£€æµ‹

**æ€§èƒ½ä¼˜åŒ–**:
- ç¼“å­˜ç­–ç•¥
- å¹¶å‘å¤„ç†
- èµ„æºç®¡ç†

### Month 4+

**ç¤¾åŒºåŠŸèƒ½**:
- ç”¨æˆ·ä¸Šä¼ ç®—æ³•
- æ’ä»¶å¸‚åœº
- æ•°æ®å…±äº«
- åä½œåŠŸèƒ½

---

**æ–‡æ¡£ç‰ˆæœ¬**: V3.0 MVP Implementation  
**åˆ›å»ºæ—¥æœŸ**: 2026-02-19  
**é¢„è®¡å®Œæˆ**: 2026-04-02 (6å‘¨)  
**çŠ¶æ€**: å¯åŠ¨ä¸­ ğŸš€
